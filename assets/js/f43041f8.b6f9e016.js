"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5057],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>f});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=r.createContext({}),s=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d=function(e){var n=s(e.components);return r.createElement(p.Provider,{value:n},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=s(t),m=i,f=u["".concat(p,".").concat(m)]||u[m]||c[m]||o;return t?r.createElement(f,a(a({ref:n},d),{},{components:t})):r.createElement(f,a({ref:n},d))}));function f(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[u]="string"==typeof e?e:i,a[1]=l;for(var s=2;s<o;s++)a[s]=t[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6999:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=t(7462),i=(t(7294),t(3905));const o={id:"subpath-imports-in-rollup",title:"Subpath Imports in Rollup",description:"\u9019\u7bc7\u6587\u7ae0\u4e3b\u8981\u4ecb\u7d39\u4e86\u5982\u4f55\u4f7f\u7528 subpath imports \u5be6\u73fe\u55ae\u7368\u5c0e\u5165\u5143\u4ef6\u7684\u529f\u80fd\uff0c\u55ae\u7368\u4f7f\u7528\u6bcf\u500b\u5143\u4ef6\u7684\u6642\u5019\uff0c\u4e0d\u9700\u8981\u518d\u5c0e\u5165\u6574\u500b\u5143\u4ef6\u5eab\uff0c\u512a\u5316\u5143\u4ef6\u5eab\u7684\u6548\u80fd\u3002\u95dc\u9375\u5728\u65bc\u900f\u904e rollup-plugin-generate-package-json \u7b49\u63d2\u4ef6\u548c\u51fd\u5f0f\uff0c\u5728\u8a2d\u7f6e rollup.config.js \u6642\u70ba\u6bcf\u500b\u5143\u4ef6\u55ae\u7368\u751f\u6210 index.js\u3001index.d.ts \u548c package.json \u6a94\u6848\u3002",sidebar_label:"\ud83d\udfe8 Subpath Imports in Rollup",hide_title:!0,hide_table_of_contents:!1,tags:["rollup","subpath-imports","typescript","react","ui-library"],draft:!1,last_updated:new Date("2022-10-17T00:00:00.000Z")},a=void 0,l={unversionedId:"frontend/other/subpath-imports-in-rollup",id:"frontend/other/subpath-imports-in-rollup",title:"Subpath Imports in Rollup",description:"\u9019\u7bc7\u6587\u7ae0\u4e3b\u8981\u4ecb\u7d39\u4e86\u5982\u4f55\u4f7f\u7528 subpath imports \u5be6\u73fe\u55ae\u7368\u5c0e\u5165\u5143\u4ef6\u7684\u529f\u80fd\uff0c\u55ae\u7368\u4f7f\u7528\u6bcf\u500b\u5143\u4ef6\u7684\u6642\u5019\uff0c\u4e0d\u9700\u8981\u518d\u5c0e\u5165\u6574\u500b\u5143\u4ef6\u5eab\uff0c\u512a\u5316\u5143\u4ef6\u5eab\u7684\u6548\u80fd\u3002\u95dc\u9375\u5728\u65bc\u900f\u904e rollup-plugin-generate-package-json \u7b49\u63d2\u4ef6\u548c\u51fd\u5f0f\uff0c\u5728\u8a2d\u7f6e rollup.config.js \u6642\u70ba\u6bcf\u500b\u5143\u4ef6\u55ae\u7368\u751f\u6210 index.js\u3001index.d.ts \u548c package.json \u6a94\u6848\u3002",source:"@site/docs/frontend/other/2022-10-17-subpath-imports-in-rollup.mdx",sourceDirName:"frontend/other",slug:"/frontend/other/subpath-imports-in-rollup",permalink:"/frontend/other/subpath-imports-in-rollup",draft:!1,editUrl:"https://github.com/windsuzu/windsuzu.github.io/tree/master/docs/frontend/other/2022-10-17-subpath-imports-in-rollup.mdx",tags:[{label:"rollup",permalink:"/tags/rollup"},{label:"subpath-imports",permalink:"/tags/subpath-imports"},{label:"typescript",permalink:"/tags/typescript"},{label:"react",permalink:"/tags/react"},{label:"ui-library",permalink:"/tags/ui-library"}],version:"current",lastUpdatedAt:1678630745,formattedLastUpdatedAt:"2023\u5e743\u670812\u65e5",frontMatter:{id:"subpath-imports-in-rollup",title:"Subpath Imports in Rollup",description:"\u9019\u7bc7\u6587\u7ae0\u4e3b\u8981\u4ecb\u7d39\u4e86\u5982\u4f55\u4f7f\u7528 subpath imports \u5be6\u73fe\u55ae\u7368\u5c0e\u5165\u5143\u4ef6\u7684\u529f\u80fd\uff0c\u55ae\u7368\u4f7f\u7528\u6bcf\u500b\u5143\u4ef6\u7684\u6642\u5019\uff0c\u4e0d\u9700\u8981\u518d\u5c0e\u5165\u6574\u500b\u5143\u4ef6\u5eab\uff0c\u512a\u5316\u5143\u4ef6\u5eab\u7684\u6548\u80fd\u3002\u95dc\u9375\u5728\u65bc\u900f\u904e rollup-plugin-generate-package-json \u7b49\u63d2\u4ef6\u548c\u51fd\u5f0f\uff0c\u5728\u8a2d\u7f6e rollup.config.js \u6642\u70ba\u6bcf\u500b\u5143\u4ef6\u55ae\u7368\u751f\u6210 index.js\u3001index.d.ts \u548c package.json \u6a94\u6848\u3002",sidebar_label:"\ud83d\udfe8 Subpath Imports in Rollup",hide_title:!0,hide_table_of_contents:!1,tags:["rollup","subpath-imports","typescript","react","ui-library"],draft:!1,last_updated:"2022-10-17T00:00:00.000Z"},sidebar:"other",previous:{title:"\ud83d\udce2 README",permalink:"/frontend/other/intro"},next:{title:"\ud83d\udfe9 Webpack Beginner",permalink:"/frontend/other/webpack-beginner"}},p={},s=[{value:"The goal of the <code>dist</code> folder",id:"the-goal-of-the-dist-folder",level:2},{value:"Steps for Implementing Subpath Imports",id:"steps-for-implementing-subpath-imports",level:2}],d={toc:s};function u(e){let{components:n,...t}=e;return(0,i.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("profile",{title:"How to support subpath imports using React+Rollup+Typescript",url:"https://medium.com/singapore-gds/how-to-support-subpath-imports-using-react-rollup-typescript-1d3d331f821b",author:"Chong Lu Khei",level:"intermediate",category:["other","js/ts","react/next"]}),(0,i.kt)("p",null,"\u7576\u6211\u5011\u60f3\u8981\u958b\u767c\u4e00\u500b React UI library \u6642\uff0c\u5927\u90e8\u5206\u7684\u6559\u5b78\u90fd\u6703\u76f4\u63a5\u5c07\u6240\u6709\u7684\u5143\u4ef6\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"index.ts")," \u4f86\u532f\u51fa\uff0c\u9019\u6a23\u7684\u597d\u8655\u662f\u4f7f\u7528\u8005\u53ef\u4ee5\u76f4\u63a5\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"import { Button, Card, ... } from 'my-library'")," \u4f86\u5f15\u5165\u6240\u6709\u7684\u5143\u4ef6\u3002\u4f46\u662f\u9019\u6a23\u7684\u7f3a\u9ede\u662f\uff0c\u7576 library \u8d8a\u4f86\u8d8a\u5927\u6642\uff0c\u6211\u5011\u60f3\u8981\u5f15\u5165\u67d0\u500b\u5143\u4ef6\uff0c\u5c31\u5fc5\u9808\u5c07\u6574\u500b library \u90fd\u5f15\u5165\u9032\u4f86\u3002"),(0,i.kt)("p",null,"\u6211\u5011\u53ef\u4ee5\u5229\u7528 ",(0,i.kt)("strong",{parentName:"p"},"subpath imports")," \u4f86\u89e3\u6c7a\u9019\u500b\u554f\u984c\u3002\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"import { Button } from 'my-library/button'")," \u4f86\u5f15\u5165\u55ae\u4e00\u5143\u4ef6\uff0c\u800c\u4e0d\u662f\u5c07\u6574\u500b library \u90fd\u5f15\u5165\uff0c\u53ef\u4ee5\u6e1b\u5c11 bundle \u7684\u5927\u5c0f\u3002\u9019\u500b\u6559\u5b78\u6703\u4ee5 React + Rollup + Typescript \u70ba\u4f8b\uff0c\u4f86\u4ecb\u7d39\u5982\u4f55\u4ee5 subpath imports \u7684\u65b9\u5f0f\u6253\u5305\u4e00\u500b React UI library\u3002"),(0,i.kt)("h2",{id:"the-goal-of-the-dist-folder"},"The goal of the ",(0,i.kt)("inlineCode",{parentName:"h2"},"dist")," folder"),(0,i.kt)("p",null,"\u6211\u5011\u5e0c\u671b\u6700\u5f8c\u6253\u5305\u51fa\u4f86\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"dist")," \u8cc7\u6599\u593e\u80fd\u5920\u5448\u73fe\u4ee5\u4e0b\u7684\u67b6\u69cb\uff0c\u6bcf\u500b\u5143\u4ef6\u90fd\u64c1\u6709\u81ea\u5df1\u7684\u8cc7\u6599\u593e\uff0c\u88e1\u9762\u5305\u542b\u4e86\u8a72\u5143\u4ef6\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"index.d.ts"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"index.js"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"index.js.map")," \u7b49\u7b49\u3002\u9019\u6a23\u53ef\u4ee5\u8b93\u4f7f\u7528\u8005\u5728\u5f15\u5165\u5143\u4ef6\u6642\uff0c\u53ea\u9700\u8981\u5f15\u5165\u8a72\u5143\u4ef6\u6240\u5c0d\u61c9\u7684\u8cc7\u6599\u593e\u5373\u53ef\uff0c\u4e0d\u9700\u8981\u5c07\u6574\u500b library \u5f15\u5165\u9032\u4f86\u3002\u4f8b\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"dist/Accordion")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"dist/Alert"),"\u3002\u540c\u6642\uff0c\u5728\u6574\u500b library \u7684\u6839\u76ee\u9304\u4e0b\uff0c\u4e5f\u9700\u8981\u6709\u4e00\u4e9b\u6a94\u6848\u548c\u8cc7\u6599\u593e\uff0c\u8655\u7406\u6574\u500b library \u7684 cjs\u3001esm \u548c types definition \u7684 entry point \u4ee5\u53ca ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," \u7b49\u7b49\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"dist\n// highlight-next-line\n\u251c\u2500\u2500 Accordion\n\u2502   \u251c\u2500\u2500 Accordion.d.ts\n\u2502   \u251c\u2500\u2500 AccordionBody.d.ts\n\u2502   \u251c\u2500\u2500 AccordionButton.d.ts\n\u2502   \u251c\u2500\u2500 AccordionCollapse.d.ts\n\u2502   \u251c\u2500\u2500 AccordionContext.d.ts\n\u2502   \u251c\u2500\u2500 AccordionHeader.d.ts\n\u2502   \u251c\u2500\u2500 AccordionItem.d.ts\n\u2502   \u251c\u2500\u2500 AccordionItemContext.d.ts\n\u2502   \u251c\u2500\u2500 index.d.ts                // --\x3e types definition entry point for Accordion component only\n\u2502   \u251c\u2500\u2500 index.js                  // --\x3e esm entry point for Accordion component only\n\u2502   \u251c\u2500\u2500 index.js.map\n\u2502   \u2514\u2500\u2500 package.json              // --\x3e package.json for Accordion component only\n// highlight-next-line\n\u251c\u2500\u2500 Alert\n\u2502   \u251c\u2500\u2500 Alert.d.ts\n\u2502   \u251c\u2500\u2500 AlertHeading.d.ts\n\u2502   \u251c\u2500\u2500 AlertLink.d.ts\n\u2502   \u251c\u2500\u2500 index.d.ts\n\u2502   \u251c\u2500\u2500 index.js\n\u2502   \u251c\u2500\u2500 index.js.map\n\u2502   \u2514\u2500\u2500 package.json\n...\n// error-next-line\n\u251c\u2500\u2500 cjs\n\u2502   \u251c\u2500\u2500 index.js        //--\x3e cjs format entry point of whole library\n\u2502   \u2514\u2500\u2500 index.js.map\n// error-next-line\n\u251c\u2500\u2500 index.d.ts\n// error-next-line\n\u251c\u2500\u2500 index.js            // --\x3e esm format entry point of whole library\n\u251c\u2500\u2500 index.js.map\n// error-next-line\n\u251c\u2500\u2500 package.json        // --\x3e package.json file for the whole library\n")),(0,i.kt)("h2",{id:"steps-for-implementing-subpath-imports"},"Steps for Implementing Subpath Imports"),(0,i.kt)("p",null,"\u63a5\u4e0b\u4f86\u6211\u5011\u8981\u6309\u7167\u4ee5\u4e0b\u4e94\u500b\u6b65\u9a5f\u4f86\u5be6\u73fe subpath imports\uff1a"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\u5728\u6bcf\u500b\u5143\u4ef6\u7684\u8cc7\u6599\u593e\u4e2d\u5efa\u7acb ",(0,i.kt)("inlineCode",{parentName:"li"},"index.ts")," \u6a94\u6848\uff0c\u7136\u5f8c\u5728\u8a72\u6a94\u6848\u4e2d\u532f\u51fa\u8a72\u5143\u4ef6\u548c ",(0,i.kt)("inlineCode",{parentName:"li"},"props"),"\u3002\u53e6\u5916\uff0c\u5728\u5c08\u6848\u6700\u9802\u5c64\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"index.ts")," \u6a94\u6848\u4e2d\u4e5f\u532f\u51fa\u6240\u6709\u5143\u4ef6\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"index.ts")," \u6a94\u6848\u3002\u9019\u6a23\uff0c\u6211\u5011\u7684 UI library \u5c31\u53ef\u4ee5\u4f7f\u7528\u5169\u7a2e\u65b9\u5f0f\u5f15\u5165\u5143\u4ef6\u4e86\uff1a")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"import { Component } from 'my-ui-library/components'")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"import { Component } from 'my-ui-library'"),"\u3002")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'// src/accordion/index.ts\nexport { Accordion } from "./accordion";\nexport type { AccordionProps } from "./accordion";\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'// src/index.ts\nexport * from "./accordion";\nexport * from "./alert";\n...\n')),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},"tsconfig.json")," \u4e2d\u6307\u5b9a\u8f38\u51fa\u7684\u8def\u5f91\u548c type \u7684\u8def\u5f91\u3002")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'// ./tsconfig.json\n{\n  "compilerOptions": {\n    "target": "esnext",\n    "module": "esnext",\n    "lib": ["dom", "esnext"],\n    // output .d.ts declaration files for consumers\n    "declaration": true,\n    // highlight-next-line\n    "declarationDir": "dist",\n    // output .js.map sourcemap files for consumers\n    "sourceMap": true,\n    // highlight-next-line\n    "rootDir": "src",\n    ...\n  },\n  "include": ["src/**/*"],\n  "exclude": [\n    "node_modules",\n    "build",\n    "src/**/*.stories.tsx",\n    "src/**/*.test.tsx"\n  ]\n}\n')),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},"package.json")," \u6a94\u6848\u4e2d\u6307\u5b9a ",(0,i.kt)("inlineCode",{parentName:"li"},"main"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"module")," \u548c ",(0,i.kt)("inlineCode",{parentName:"li"},"typings")," \u7684\u6587\u4ef6\u8def\u5f91\uff0c\u9019\u4e09\u500b\u6587\u4ef6\u5206\u5225\u4ee3\u8868\u4ee5\u4e0b\u5167\u5bb9\uff1a")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"main"),"\uff1a\u6307\u5b9a\u6a21\u7d44\u7684\u5165\u53e3\u6a94\u6848\u8def\u5f91\u3002"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"module"),"\uff1a\u8868\u793a ES6 \u6a21\u7d44\u7684\u5165\u53e3\u6a94\u6848\u8def\u5f91\u3002\u5982\u679c\u9019\u500b\u6b04\u4f4d\u4e0d\u5b58\u5728\uff0cNode.js \u6703\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"main")," \u6b04\u4f4d\u3002"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"typings"),"\uff1a\u6307\u5b9a TypeScript \u578b\u5225\u6a94\u6848\u7684\u8def\u5f91\u3002")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'// ./package.json\n"scripts": {\n    "rollup": "rm -rf dist && rollup -c",\n    "build": "npm run rollup && npm run post:build",\n    "post:build": "node ./scripts/frankBuild.js",\n...\n},\n// highlight-start\n"main": "dist/cjs/index.js",   // points to the entry point for cjs format of the library\n"module": "dist/index.js",     // points to the entry point for esm format of the library\n"typings": "dist/index.d.ts",  // points to the entry point for type definitions of the above two files\n// highlight-end\n')),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"\u70ba\u4e86\u5728\u6253\u5305\u7684\u6bcf\u500b\u5143\u4ef6\u4e2d\u751f\u6210\u7368\u7acb\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"index.js"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"index.d.ts")," \u548c ",(0,i.kt)("inlineCode",{parentName:"li"},"package.json")," \u6a94\u6848\uff0c\u6211\u5011\u9700\u8981\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},"rollup.config.js")," \u4e2d\u6dfb\u52a0\u4e00\u4e9b\u51fd\u5f0f\u3002")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5b9a\u7fa9 ",(0,i.kt)("inlineCode",{parentName:"li"},"subfolderPlugins()")," \u65b9\u6cd5\uff0c\u70ba\u6bcf\u500b\u5143\u4ef6\u55ae\u7368\u751f\u6210 ",(0,i.kt)("inlineCode",{parentName:"li"},"index.js"),"\u3001",(0,i.kt)("inlineCode",{parentName:"li"},"index.d.ts")," \u548c ",(0,i.kt)("inlineCode",{parentName:"li"},"package.json")," \u6a94\u6848\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u5b9a\u7fa9 ",(0,i.kt)("inlineCode",{parentName:"li"},"folderBuilds()")," \u65b9\u6cd5\uff0c\u904d\u6b77\u6240\u6709\u5143\u4ef6\u8cc7\u6599\u593e\uff0c\u70ba\u6bcf\u500b\u5143\u4ef6\u751f\u6210\u8f38\u51fa\u3002")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},'// ./rollup.config.js\nconst plugins = [\n  peerDepsExternal(),\n  resolve(),\n  commonjs(),\n  typescript({\n    tsconfig: "./tsconfig.json",\n    useTsconfigDeclarationDir: true,\n  }),\n  terser(),\n];\n\n// Specify plugins for a given component\n// If your folder structure is different than the author\'s, you will have to adjust it slightly.\n// highlight-next-line\nconst subfolderPlugins = (folderName) => [\n  ...plugins,\n  generatePackageJson({\n    baseContents: {\n      name: `${packageJson.name}/${folderName}`,\n      private: true,\n      main: "../cjs/index.js", // --\x3e points to cjs format entry point of whole library\n      module: "./index.js", // --\x3e points to esm format entry point of individual component\n      types: "./index.d.ts", // --\x3e points to types definition file of individual component\n    },\n  }),\n];\n\n// Loop through all component folders and generates the output for each component.\n// If your folder structure is different than the author\'s, you will have to adjust it slightly.\n// highlight-next-line\nconst folderBuilds = getFolders("./src").map((folder) => {\n  return {\n    input: `src/${folder}/index.ts`,\n    output: {\n      file: `dist/${folder}/index.js`,\n      sourcemap: true,\n      exports: "named",\n      format: "esm",\n    },\n    plugins: subfolderPlugins(folder),\n    external: ["react", "react-dom"],\n  };\n});\n\nexport default [\n  {\n    input: ["src/index.ts"],\n    output: [\n      {\n        file: packageJson.module,\n        format: "esm",\n        sourcemap: true,\n        exports: "named",\n      },\n      {\n        file: packageJson.main,\n        format: "cjs",\n        sourcemap: true,\n        exports: "named",\n      },\n    ],\n    plugins,\n    external: ["react", "react-dom"],\n  },\n  // highlight-next-line\n  ...folderBuilds, // Generate outputs for all components by using the entry point of each component\n];\n')),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},"\u5728\u57f7\u884c ",(0,i.kt)("inlineCode",{parentName:"li"},"build")," \u4e4b\u5f8c\uff0c\u6211\u5011\u9700\u8981\u5c07 ",(0,i.kt)("inlineCode",{parentName:"li"},"package.json")," \u4e2d\u7684\u76f8\u95dc\u5167\u5bb9\u8907\u88fd\u5230 ",(0,i.kt)("inlineCode",{parentName:"li"},"dist/package.json")," \u4e2d\u3002\u70ba\u6b64\uff0c\u4f5c\u8005\u5efa\u7acb\u4e86\u4e00\u500b ",(0,i.kt)("inlineCode",{parentName:"li"},"frankBuild.js")," \u8173\u672c\u4f86\u5be6\u73fe\u3002\u4f60\u53ef\u4ee5",(0,i.kt)("a",{parentName:"li",href:"https://gist.github.com/clukhei/38f64ffa79f2045b816c0696dc3add67"},"\u5728\u6b64\u8655\u67e5\u770b\u7a0b\u5f0f\u78bc\u7247\u6bb5"),"\u3002")),(0,i.kt)("p",null,"\u9075\u5faa\u4e0a\u8ff0\u6b65\u9a5f\u5f8c\uff0c\u6211\u5011\u5c31\u53ef\u4ee5\u5be6\u73fe subpath imports \u7684\u529f\u80fd\uff0c\u55ae\u7368\u4f7f\u7528\u6bcf\u500b\u5143\u4ef6\u7684\u6642\u5019\uff0c\u4e0d\u9700\u8981\u518d\u5c0e\u5165\u6574\u500b\u5143\u4ef6\u5eab\uff0c\u512a\u5316\u5143\u4ef6\u5eab\u7684\u6548\u80fd\u3002\u95dc\u9375\u5728\u65bc\u900f\u904e ",(0,i.kt)("inlineCode",{parentName:"p"},"rollup-plugin-generate-package-json")," \u7b49\u63d2\u4ef6\u548c\u51fd\u5f0f\uff0c\u5728\u8a2d\u7f6e ",(0,i.kt)("inlineCode",{parentName:"p"},"rollup.config.js")," \u6642\u70ba\u6bcf\u500b\u5143\u4ef6\u55ae\u7368\u751f\u6210 ",(0,i.kt)("inlineCode",{parentName:"p"},"index.js"),"\u3001",(0,i.kt)("inlineCode",{parentName:"p"},"index.d.ts")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," \u6a94\u6848\u3002"))}u.isMDXComponent=!0}}]);