"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7445],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),s=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=s(e.components);return r.createElement(l.Provider,{value:n},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=s(t),u=a,f=m["".concat(l,".").concat(u)]||m[u]||d[u]||o;return t?r.createElement(f,i(i({ref:n},p),{},{components:t})):r.createElement(f,i({ref:n},p))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=u;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c[m]="string"==typeof e?e:a,i[1]=c;for(var s=2;s<o;s++)i[s]=t[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},5884:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var r=t(7462),a=(t(7294),t(3905));const o={id:"react-scroll-animations",title:"React Scroll Animations",description:"\u6211\u5011\u53ef\u4ee5\u900f\u904e `IntersectionObserver` \u4f86\u5075\u6e2c\u5143\u7d20\u662f\u5426\u5728\u8996\u7a97\u4e2d\uff0c\u4e26\u4e14\u900f\u904e CSS transition \u4f86\u5be6\u73fe\u6efe\u52d5\u6642\u7684\u52d5\u756b\u6548\u679c\u3002\u9019\u500b\u65b9\u6cd5\u4e0d\u9700\u8981\u4efb\u4f55\u7b2c\u4e09\u65b9\u5957\u4ef6\uff0c\u800c\u4e14\u53ef\u4ee5\u88fd\u4f5c\u6210\u4e00\u500b\u901a\u7528\u7684\u52d5\u756b\u5143\u4ef6\uff0c\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u81ea\u884c\u6c7a\u5b9a\u52d5\u756b\u7684\u6548\u679c\u3002",sidebar_label:"React Scroll Animations",hide_title:!0,hide_table_of_contents:!1,tags:["react","css","animations"],draft:!1,last_updated:new Date("2022-09-24T00:00:00.000Z")},i=void 0,c={unversionedId:"frontend/react-next/react-scroll-animations",id:"frontend/react-next/react-scroll-animations",title:"React Scroll Animations",description:"\u6211\u5011\u53ef\u4ee5\u900f\u904e `IntersectionObserver` \u4f86\u5075\u6e2c\u5143\u7d20\u662f\u5426\u5728\u8996\u7a97\u4e2d\uff0c\u4e26\u4e14\u900f\u904e CSS transition \u4f86\u5be6\u73fe\u6efe\u52d5\u6642\u7684\u52d5\u756b\u6548\u679c\u3002\u9019\u500b\u65b9\u6cd5\u4e0d\u9700\u8981\u4efb\u4f55\u7b2c\u4e09\u65b9\u5957\u4ef6\uff0c\u800c\u4e14\u53ef\u4ee5\u88fd\u4f5c\u6210\u4e00\u500b\u901a\u7528\u7684\u52d5\u756b\u5143\u4ef6\uff0c\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u81ea\u884c\u6c7a\u5b9a\u52d5\u756b\u7684\u6548\u679c\u3002",source:"@site/docs/frontend/react-next/2022-09-24-react-scroll-animations.mdx",sourceDirName:"frontend/react-next",slug:"/frontend/react-next/react-scroll-animations",permalink:"/frontend/react-next/react-scroll-animations",draft:!1,editUrl:"https://github.com/windsuzu/windsuzu.github.io/tree/master/docs/frontend/react-next/2022-09-24-react-scroll-animations.mdx",tags:[{label:"react",permalink:"/tags/react"},{label:"css",permalink:"/tags/css"},{label:"animations",permalink:"/tags/animations"}],version:"current",lastUpdatedAt:1677565390,formattedLastUpdatedAt:"2023\u5e742\u670828\u65e5",frontMatter:{id:"react-scroll-animations",title:"React Scroll Animations",description:"\u6211\u5011\u53ef\u4ee5\u900f\u904e `IntersectionObserver` \u4f86\u5075\u6e2c\u5143\u7d20\u662f\u5426\u5728\u8996\u7a97\u4e2d\uff0c\u4e26\u4e14\u900f\u904e CSS transition \u4f86\u5be6\u73fe\u6efe\u52d5\u6642\u7684\u52d5\u756b\u6548\u679c\u3002\u9019\u500b\u65b9\u6cd5\u4e0d\u9700\u8981\u4efb\u4f55\u7b2c\u4e09\u65b9\u5957\u4ef6\uff0c\u800c\u4e14\u53ef\u4ee5\u88fd\u4f5c\u6210\u4e00\u500b\u901a\u7528\u7684\u52d5\u756b\u5143\u4ef6\uff0c\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u81ea\u884c\u6c7a\u5b9a\u52d5\u756b\u7684\u6548\u679c\u3002",sidebar_label:"React Scroll Animations",hide_title:!0,hide_table_of_contents:!1,tags:["react","css","animations"],draft:!1,last_updated:"2022-09-24T00:00:00.000Z"},sidebar:"react-next",previous:{title:"State in URLSearchParams",permalink:"/frontend/react-next/state-in-urlsearchparams"},next:{title:"Function Composition",permalink:"/frontend/react-next/function-composition"}},l={},s=[{value:"Step 1. Create a custom hook <code>useElementOnScreen</code>",id:"step-1-create-a-custom-hook-useelementonscreen",level:2},{value:"Step 2. Wrap the hook and animation into a container component",id:"step-2-wrap-the-hook-and-animation-into-a-container-component",level:2},{value:"Bonus: Generic Animated Container",id:"bonus-generic-animated-container",level:2}],p={toc:s};function m(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("profile",{title:"Simple React Scroll Animations With Zero Dependencies",url:"https://betterprogramming.pub/simple-react-scroll-animations-with-zero-dependencies-b496c1e1c7bd",author:"Bret Cameron",level:"beginner",category:["react/next","html/css"]}),(0,a.kt)("p",null,"\u6211\u5011\u53ef\u4ee5\u900f\u904e ",(0,a.kt)("inlineCode",{parentName:"p"},"IntersectionObserver")," \u4f86\u5075\u6e2c\u5143\u7d20\u662f\u5426\u5728\u8996\u7a97\u4e2d\uff0c\u4e26\u4e14\u900f\u904e CSS transition \u4f86\u5be6\u73fe\u6efe\u52d5\u6642\u7684\u52d5\u756b\u6548\u679c\u3002\u9019\u500b\u65b9\u6cd5\u4e0d\u9700\u8981\u4efb\u4f55\u7b2c\u4e09\u65b9\u5957\u4ef6\uff0c\u800c\u4e14\u53ef\u4ee5\u88fd\u4f5c\u6210\u4e00\u500b\u901a\u7528\u7684\u52d5\u756b\u5143\u4ef6\uff0c\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u81ea\u884c\u6c7a\u5b9a\u52d5\u756b\u7684\u6548\u679c\u3002"),(0,a.kt)("fig",{src:"/img/reading/react-next/2022-09-24-react-scroll-animations/scroll-demo.gif",caption:"Scroll Demo"}),(0,a.kt)("h2",{id:"step-1-create-a-custom-hook-useelementonscreen"},"Step 1. Create a custom hook ",(0,a.kt)("inlineCode",{parentName:"h2"},"useElementOnScreen")),(0,a.kt)("p",null,"\u9996\u5148\uff0c\u6211\u5011\u5148\u5efa\u7acb\u4e00\u500b\u81ea\u8a02\u7684 hook ",(0,a.kt)("inlineCode",{parentName:"p"},"useElementOnScreen")," \u4f86\u5075\u6e2c\u5143\u7d20\u662f\u5426\u5728\u8996\u7a97\u4e2d\u3002\u88e1\u9762\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"rootMargin")," \u53c3\u6578\u53ef\u4ee5\u8b93\u6211\u5011\u8a2d\u5b9a\u4e00\u500b\u504f\u79fb\u91cf\uff0c\u8b93\u52d5\u756b\u5728\u8996\u7a97\u908a\u7de3\u7684\u67d0\u500b\u8ddd\u96e2\u958b\u59cb\uff0c\u800c ",(0,a.kt)("inlineCode",{parentName:"p"},"0px")," \u5247\u662f\u6b63\u597d\u5728\u908a\u7de3\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'function useElementOnScreen(ref: RefObject<Element>, rootMargin = "0px") {\n  const [isIntersecting, setIsIntersecting] = useState(true);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsIntersecting(entry.isIntersecting);\n      },\n      { rootMargin }\n    );\n    if (ref.current) {\n      observer.observe(ref.current);\n    }\n    return () => {\n      if (ref.current) {\n        observer.unobserve(ref.current);\n      }\n    };\n  }, []);\n  return isIntersecting;\n}\n')),(0,a.kt)("h2",{id:"step-2-wrap-the-hook-and-animation-into-a-container-component"},"Step 2. Wrap the hook and animation into a container component"),(0,a.kt)("p",null,"\u7b2c\u4e8c\u6b65\uff0c\u6211\u5011\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"useElementOnScreen")," hook \u548c CSS transition \u6574\u5408\u5230\u4e00\u500b container component \u4e2d\u3002 ",(0,a.kt)("inlineCode",{parentName:"p"},"useElementOnScreen")," hook \u6703\u56de\u50b3\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"boolean")," \u503c\uff0c\u6211\u5011\u53ef\u4ee5\u5229\u7528\u9019\u500b\u503c\u4f86\u6c7a\u5b9a\u5143\u7d20\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"opacity")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"translate")," \u6548\u679c\u3002 ",(0,a.kt)("inlineCode",{parentName:"p"},"opacity")," \u6703\u5728\u5143\u7d20\u9032\u5165\u8996\u7a97\u6642\u8b8a\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"1"),"\uff0c\u800c ",(0,a.kt)("inlineCode",{parentName:"p"},"translate")," \u5247\u662f\u5728\u5143\u7d20\u9032\u5165\u8996\u7a97\u6642\u6703\u5f9e ",(0,a.kt)("inlineCode",{parentName:"p"},"0 2rem")," \u8b8a\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"none"),"\uff0c\u4e5f\u5c31\u662f\u6c92\u6709\u4f4d\u79fb\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'const AnimateIn: FC<PropsWithChildren> = ({ children }) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const onScreen = useElementOnScreen(ref);\n\n  return (\n    <div\n      ref={ref}\n      style={{\n        opacity: onScreen ? 1 : 0,\n        translate: onScreen ? "none" : "0 2rem",\n        transition: "600ms ease-in-out",\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n')),(0,a.kt)("p",null,"\u8981\u4f7f\u7528\u9019\u500b container\uff0c\u6211\u5011\u53ea\u9700\u8981\u5c07\u6211\u5011\u7684\u5143\u4ef6\u5305\u5728 children \u5373\u53ef\u3002 \u5230\u9019\u908a\uff0c\u6211\u5011\u5df2\u7d93\u5efa\u7acb\u4e86\u4e00\u500b\u53ef\u4ee5\u505a\u6de1\u5165\u52d5\u756b\u7684\u5143\u4ef6\uff0c\u800c\u4e14\u4e0d\u9700\u8981\u4efb\u4f55\u7b2c\u4e09\u65b9\u5957\u4ef6\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"<AnimateIn>\n  <h1>Hello World</h1>\n</AnimateIn>\n")),(0,a.kt)("h2",{id:"bonus-generic-animated-container"},"Bonus: Generic Animated Container"),(0,a.kt)("p",null,"\u6211\u5011\u53ef\u4ee5\u9032\u4e00\u6b65\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"<AnimatedIn>")," \u5143\u4ef6\u8b8a\u5f97\u66f4\u901a\u7528\uff0c\u900f\u904e\u50b3\u5165 ",(0,a.kt)("inlineCode",{parentName:"p"},"CSSProperties")," \u4f86\u6c7a\u5b9a\u5143\u4ef6\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"from")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"to")," \u72c0\u614b\uff0c\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u81ea\u884c\u6c7a\u5b9a\u52d5\u756b\u7684\u6548\u679c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'const AnimateIn: FC<\n  PropsWithChildren<{ from: CSSProperties; to: CSSProperties }>\n> = ({ from, to, children }) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const onScreen = useElementOnScreen(ref);\n  const defaultStyles: CSSProperties = {\n    transition: "600ms ease-in-out",\n  };\n  return (\n    <div\n      ref={ref}\n      style={\n        onScreen\n          ? {\n              ...defaultStyles,\n              ...to,\n            }\n          : {\n              ...defaultStyles,\n              ...from,\n            }\n      }\n    >\n      {children}\n    </div>\n  );\n};\n')),(0,a.kt)("p",null,"\u73fe\u5728\u6211\u5011\u53ef\u4ee5\u50b3\u5165\u4e0d\u540c\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"from")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"to")," ",(0,a.kt)("strong",{parentName:"p"},"CSSProperties")," \u4f86\u7522\u751f\u4e0d\u540c\u7684\u52d5\u756b\u5143\u4ef6\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},'const FadeIn: FC<PropsWithChildren> = ({ children }) => (\n  <AnimateIn from={{ opacity: 0 }} to={{ opacity: 1 }}>\n    {children}\n  </AnimateIn>\n);\n\nconst FadeUp: FC<PropsWithChildren> = ({ children }) => (\n  <AnimateIn\n    from={{ opacity: 0, translate: "0 2rem" }}\n    to={{ opacity: 1, translate: "none" }}\n  >\n    {children}\n  </AnimateIn>\n);\n\nconst ScaleIn: FC<PropsWithChildren> = ({ children }) => (\n  <AnimateIn from={{ scale: "0" }} to={{ scale: "1" }}>\n    {children}\n  </AnimateIn>\n);\n\nexport const Animate = {\n  FadeIn,\n  FadeUp,\n  ScaleIn,\n};\n\n<Animate.ScaleIn>\n  <h1>Hello World</h1>\n</Animate.ScaleIn>;\n')))}m.isMDXComponent=!0}}]);