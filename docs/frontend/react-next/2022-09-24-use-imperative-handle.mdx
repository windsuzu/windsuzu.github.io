---
id: use-imperative-handle
title: useImperativeHandle
description: æœ¬æ–‡å°‡ä»‹ç´¹ useImperativeHandle é€™å€‹ hookï¼Œå®ƒå¯ä»¥è®“æˆ‘å€‘æ””æˆªçˆ¶å…ƒä»¶å‚³éçš„ refï¼Œä¸¦å›å‚³ä¸€çµ„æ–°çš„æ–¹æ³•çµ¦è©² refã€‚ é€™å€‹ hook é€šå¸¸æœƒæ­é… forwardRef ä¸€èµ·ä½¿ç”¨ï¼Œè®“æˆ‘å€‘åœ¨è‡ªå®šç¾©å…ƒä»¶ä¸­å–å¾— DOM referenceï¼Œä¸¦ä¸”å¯ä»¥åœ¨çˆ¶å…ƒä»¶ä¸­ä½¿ç”¨å­å…ƒä»¶çš„å‡½å¼ã€‚
sidebar_label: useImperativeHandle
hide_title: true
hide_table_of_contents: false
tags: [react, forwardRef, useImperativeHandle]
draft: false
last_updated: 2022-09-24
---

<profile
  title="When to use â€œuseImperativeHandleâ€ and â€œforwardRefsâ€ in React 18"
  url="https://betterprogramming.pub/when-to-use-useimperativehandle-and-forwardrefs-in-react-18-89cce42b3309"
  author="Sameer Kumar"
  level="beginner"
  category={["react/next"]}
/>

æœ¬æ–‡å°‡ä»‹ç´¹ `useImperativeHandle` é€™å€‹ hookï¼Œå®ƒå¯ä»¥è®“æˆ‘å€‘æ””æˆªçˆ¶å…ƒä»¶å‚³éçš„ `ref`ï¼Œä¸¦å›å‚³ä¸€çµ„æ–°çš„æ–¹æ³•çµ¦è©² `ref`ã€‚ é€™å€‹ hook é€šå¸¸æœƒæ­é… `forwardRef` ä¸€èµ·ä½¿ç”¨ï¼Œè®“æˆ‘å€‘åœ¨è‡ªå®šç¾©å…ƒä»¶ä¸­å–å¾— DOM referenceï¼Œä¸¦ä¸”å¯ä»¥åœ¨çˆ¶å…ƒä»¶ä¸­ä½¿ç”¨å­å…ƒä»¶çš„å‡½å¼ã€‚

:::info
ğŸ’¡ Learn more details about `useImperativeHandle` in **[Learn
useImperativeHandle In 10
Minutes](https://www.youtube.com/watch?v=zpEyAOkytkU).**
:::

## When to use `React.forwardRef`

ç•¶æˆ‘å€‘æƒ³è¦åœ¨<highlight>è‡ªå®šç¾©å…ƒä»¶ä¸­å–å¾— DOM reference æ™‚ï¼Œæˆ‘å€‘æœƒä½¿ç”¨ `forwardRef` ä¾†åŒ…è£è©²å…ƒä»¶</highlight>ã€‚åœ¨ä¸‹é¢çš„ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å°‡
`<NinjaButton>` åŒ…è£åœ¨ `forwardRef` ä¸­ï¼Œä¸¦å°‡ `ref` æŒ‡å®šçµ¦å…§éƒ¨çš„ `<button>`ã€‚é€™æ¨£ä¸€ä¾†ï¼Œæˆ‘å€‘åœ¨ä½¿ç”¨ `<NinjaButton>` æ™‚ï¼Œå°±å¯ä»¥å–å¾—è©²å…ƒä»¶å…§éƒ¨çš„ `<button>` çš„ referenceã€‚

```jsx live noInline
const NinjaButton = React.forwardRef((props, ref) => (
  <button ref={ref}>{props.children}</button>
));

const App = () => {
  const btnRef = useRef();

  useEffect(() => {
    btnRef.current.disabled = true;
  }, []);

  return <NinjaButton ref={btnRef}>Ninja</NinjaButton>;
};

render(<App />);
```

## When to use `useImperativeHandle`

With the help of `useImperativeHandle`, we can intercept the ref pass from the parent and return **a new set of methods** for that ref. In the following example, `btnRef` receives a new set of methods (`changeStyle` and `customFocus`) from `useImperativeHandle` in the `NinjaButton`. This allows us to use the child's (`NinjaButton`) functions from the parent (`App`).

æˆ‘å€‘å¯ä»¥åœ¨è‡ªå®šç¾©å…ƒä»¶ä¸­ä½¿ç”¨ `useImperativeHandle` ä¾†æ””æˆªçˆ¶å…ƒä»¶å‚³éçš„ `ref`ï¼Œä¸¦å›å‚³ä¸€çµ„æ–°çš„æ–¹æ³•çµ¦è©² `ref`ã€‚åœ¨ä¸‹é¢çš„ç¯„ä¾‹ä¸­ï¼Œ`btnRef` å¾ `NinjaButton` ä¸­çš„ `useImperativeHandle` ä¸­æ¥æ”¶åˆ°ä¸€çµ„æ–°çš„æ–¹æ³• (`changeStyle`)ã€‚é€™æ¨£ä¸€ä¾†ï¼Œæˆ‘å€‘å°±å¯ä»¥åœ¨çˆ¶å…ƒä»¶ (`App`) ä¸­ä½¿ç”¨å­å…ƒä»¶ (`NinjaButton`) çš„å‡½å¼ã€‚

```jsx live noInline
const NinjaButton = React.forwardRef((props, ref) => {
  const localRef = useRef();

  useImperativeHandle(ref, () => ({
    changeStyle: ({ textColor, backgroundColor }) => {
      localRef.current.style.padding = "5px 10px";
      localRef.current.style.color = textColor;
      localRef.current.style.background = backgroundColor;
    },
  }));
  return <button ref={localRef}>{props.children}</button>;
});

const App = () => {
  const btnRef = useRef();

  useEffect(() => {
    btnRef.current.changeStyle({
      textColor: "white",
      backgroundColor: "black",
    });
  }, []);

  return <NinjaButton ref={btnRef}>Ninja</NinjaButton>;
};

render(<App />);
```

## Summary

`forwardRef` æ˜¯ä¸€å€‹é«˜éšå…ƒä»¶ï¼Œå®ƒå¯ä»¥è®“æˆ‘å€‘åœ¨è‡ªå®šç¾©å…ƒä»¶ä¸­å–å¾— DOM referenceã€‚`useImperativeHandle` æ˜¯ä¸€å€‹ hookï¼Œå®ƒå¯ä»¥è®“æˆ‘å€‘æ””æˆªçˆ¶å…ƒä»¶å‚³éçš„ `ref`ï¼Œä¸¦å›å‚³ä¸€çµ„æ–°çš„æ–¹æ³•çµ¦è©² `ref`ã€‚ é€™å…©å€‹å…ƒä»¶å¯ä»¥æ­é…ä½¿ç”¨ï¼Œè®“æˆ‘å€‘åœ¨è‡ªå®šç¾©å…ƒä»¶ä¸­å–å¾— DOM referenceï¼Œä¸¦ä¸”å¯ä»¥åœ¨çˆ¶å…ƒä»¶ä¸­ä½¿ç”¨å­å…ƒä»¶çš„å‡½å¼ã€‚
